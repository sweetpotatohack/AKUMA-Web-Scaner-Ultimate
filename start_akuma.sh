#!/bin/bash

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m'

echo -e "${RED}"
echo "    ‚ñÑ‚ñÑ‚ñÑ       ‚ñà‚ñà ‚ñÑ‚ñà‚ñÄ ‚ñà    ‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñÑ ‚ñÑ‚ñà‚ñà‚ñà‚ñì ‚ñÑ‚ñÑ‚ñÑ      "
echo "   ‚ñí‚ñà‚ñà‚ñà‚ñà‚ñÑ     ‚ñà‚ñà‚ñÑ‚ñà‚ñí  ‚ñà‚ñà  ‚ñì‚ñà‚ñà‚ñí‚ñì‚ñà‚ñà‚ñí‚ñÄ‚ñà‚ñÄ ‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñà‚ñà‚ñÑ    "
echo "   ‚ñí‚ñà‚ñà  ‚ñÄ‚ñà‚ñÑ  ‚ñì‚ñà‚ñà‚ñà‚ñÑ‚ñë ‚ñì‚ñà‚ñà  ‚ñí‚ñà‚ñà‚ñë‚ñì‚ñà‚ñà    ‚ñì‚ñà‚ñà‚ñë‚ñí‚ñà‚ñà  ‚ñÄ‚ñà‚ñÑ  "
echo "   ‚ñë‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà ‚ñì‚ñà‚ñà ‚ñà‚ñÑ ‚ñì‚ñì‚ñà  ‚ñë‚ñà‚ñà‚ñë‚ñí‚ñà‚ñà    ‚ñí‚ñà‚ñà ‚ñë‚ñà‚ñà‚ñÑ‚ñÑ‚ñÑ‚ñÑ‚ñà‚ñà "
echo "    ‚ñì‚ñà   ‚ñì‚ñà‚ñà‚ñí‚ñí‚ñà‚ñà‚ñí ‚ñà‚ñÑ‚ñí‚ñí‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì ‚ñí‚ñà‚ñà‚ñí   ‚ñë‚ñà‚ñà‚ñí ‚ñì‚ñà   ‚ñì‚ñà‚ñà‚ñí"
echo "    ‚ñí‚ñí   ‚ñì‚ñí‚ñà‚ñë‚ñí ‚ñí‚ñí ‚ñì‚ñí‚ñë‚ñí‚ñì‚ñí ‚ñí ‚ñí ‚ñë ‚ñí‚ñë   ‚ñë  ‚ñë ‚ñí‚ñí   ‚ñì‚ñí‚ñà‚ñë"
echo "     ‚ñí   ‚ñí‚ñí ‚ñë‚ñë ‚ñë‚ñí ‚ñí‚ñë‚ñë‚ñë‚ñí‚ñë ‚ñë ‚ñë ‚ñë  ‚ñë      ‚ñë  ‚ñí   ‚ñí‚ñí ‚ñë"
echo "     ‚ñë   ‚ñí   ‚ñë ‚ñë‚ñë ‚ñë  ‚ñë‚ñë‚ñë ‚ñë ‚ñë ‚ñë      ‚ñë     ‚ñë   ‚ñí   "
echo "         ‚ñë  ‚ñë‚ñë  ‚ñë      ‚ñë            ‚ñë         ‚ñë  ‚ñë"
echo -e "${NC}"
echo -e "${CYAN}üî• AKUMA Web Scanner - Ultimate Security Testing Tool${NC}"
echo -e "${YELLOW}‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê${NC}"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω –ª–∏ —É–∂–µ —Å–∫—Ä–∏–ø—Ç
if pgrep -f "python.*app.py" > /dev/null; then
    echo -e "${YELLOW}‚ö†Ô∏è  Backend —É–∂–µ –∑–∞–ø—É—â–µ–Ω${NC}"
else
    echo -e "${GREEN}üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Backend...${NC}"
    cd backend && python3 app.py &
    BACKEND_PID=$!
    echo -e "${GREEN}‚úÖ Backend –∑–∞–ø—É—â–µ–Ω (PID: $BACKEND_PID)${NC}"
fi

if pgrep -f "npm.*start" > /dev/null; then
    echo -e "${YELLOW}‚ö†Ô∏è  Frontend —É–∂–µ –∑–∞–ø—É—â–µ–Ω${NC}"
else
    echo -e "${GREEN}üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Frontend...${NC}"
    cd frontend && npm start &
    FRONTEND_PID=$!
    echo -e "${GREEN}‚úÖ Frontend –∑–∞–ø—É—â–µ–Ω (PID: $FRONTEND_PID)${NC}"
fi

echo ""
echo -e "${CYAN}üì° –°–µ—Ä–≤–∏—Å—ã:${NC}"
echo -e "${GREEN}‚Ä¢ Backend API: http://127.0.0.1:8000${NC}"
echo -e "${GREEN}‚Ä¢ Frontend UI: http://127.0.0.1:3000${NC}"
echo ""
echo -e "${YELLOW}üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏:${NC}"
echo -e "${BLUE}‚Ä¢ –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://127.0.0.1:3000${NC}"
echo -e "${BLUE}‚Ä¢ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://127.0.0.1:8000/docs${NC}"
echo -e "${BLUE}‚Ä¢ –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏: Ctrl+C –∏–ª–∏ ./stop_akuma.sh${NC}"
echo ""
echo -e "${RED}‚ö° AKUMA Scanner –≥–æ—Ç–æ–≤ –∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—é!${NC}"

# –ñ–¥–µ–º —Å–∏–≥–Ω–∞–ª –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
trap 'echo -e "\n${RED}üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º AKUMA Scanner...${NC}"; kill $BACKEND_PID $FRONTEND_PID 2>/dev/null; exit 0' SIGINT SIGTERM

# –û–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
wait
